(function(){function e(t,n,i){function s(u,a){if(!n[u]){if(!t[u]){var f="function"==typeof require&&require;if(!a&&f)return f(u,!0);if(o)return o(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[u]={exports:{}};t[u][0].call(c.exports,function(e){var n=t[u][1][e];return s(n||e)},c,c.exports,e,t,n,i)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<i.length;u++)s(i[u]);return s}return e})()({1:[function(e,t,n){function i(e){e||(e={}),(!e.container||!e.iframeUrl)&&console.error("no container or url"),this.params=e}var r=e("@yandex-lego/rpc");i.prototype={win:window,init:function(e){return e||(e={}),this.container=this.params.container||e.container,this.initIframe(),this},getParams:function(){return this.params},getRPCBridge:function(e){return this._rpc?this._rpc:new r(e,{url:this.params.iframeUrl})},triggerEvent:function(e,t){this._events&&(this._events[e]||[]).forEach(function(n){n({type:e,target:this},t)}.bind(this))},on:function(e,t){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),this._events[e].push(t),this},initIframe:function(e){var t=document.createElement("iframe");t.frameBorder=0,t.src=this.params.iframeUrl,t.style.display="block",t.style.width="100%",t.style.height="100%",t.style.zIndex=this.params.zIndex,t.style.transform="translate3d(0px, 0px, 0px)",t.setAttribute("aria-hidden","true"),t.onwheel=function(){},t.onload=function(){this.triggerEvent("init",{iframeWin:t.contentWindow,iframeHeight:t.clientHeight})}.bind(this),this.container.appendChild(t),this.iframe=t},removeIframe:function(){this.iframe&&this.container.removeChild(this.iframe),this.iframe=undefined}},window.LegoIframeLoader=i},{"@yandex-lego/rpc":2}],2:[function(e,t,n){function r(e,t){this.agent=e,this.contrAgent=t||{},this._resultCallbacks={},this._resultCallbacksIndex=0,this._onMessage=this._onMessage.bind(this),this.agent.win.addEventListener("message",this._onMessage),this.pushMessagesToStack=!1,this.pushMessagesToQueue=!1,this._messagesStack=[]}r.prototype={invokeMethod:function(e,t,n){return t=[].concat(t),this._invokeMethod(e,t,n),this},clean:function(){this.agent.win.removeEventListener("message",this._onMessage),this.agent=undefined,this.contrAgent=undefined,this._resultCallbacks=undefined,this._resultCallbacksIndex=0},onIframeLoad:function(){var e=this.pushMessagesToQueue?this._messagesStack:this._messagesStack.reverse();e.forEach(this._onMessage),this._messagesStack=[],this.pushMessagesToStack=!1,this.pushMessagesToQueue=!1},_onMessage:function(e){if(!this.contrAgent||!this.contrAgent.win||e.source!==this.contrAgent.win){(this.pushMessagesToStack||this.pushMessagesToQueue)&&this._messagesStack.push(e);return}var t=e.data;try{t=JSON.parse(t)}catch(n){return}var r;if(t.methodCall){this.contrAgent.url||(this.contrAgent.url=e.origin);if(this.agent[t.methodCall]){var i=t.params,s;r=t.resultCallbackIndex?this._deInstrumentCallback(t.resultCallbackIndex):[],t.paramsCallbackIndex&&(i=[].concat(i,this._deInstrumentCallback(t.paramsCallbackIndex))),s=this.agent[t.methodCall].apply(this.agent,[].concat(i)),t.resultCallbackIndex&&r(s)}}else t.returnCall&&(r=this._idObjToCallback(t.resultCallbackIndex),r&&r.apply(this.agent,[].concat(t.params)))},_invokeCallback:function(e,t){this._invokeMethod("",t,e)},_callbackToIdObj:function(e){var t=++this._resultCallbacksIndex;return this._resultCallbacks[t]=e,{__callbackId:t}},_idObjToCallback:function(e){var t=e,n=this._resultCallbacks[t];return delete this._resultCallbacks[t],n},_instrumentCallback:function(e){return this._callbackToIdObj(e)},_deInstrumentCallback:function(e){return function(){setTimeout(function(t){this.contrAgent&&this._invokeCallback(e.__callbackId,[].slice.call(t))}.bind(this,arguments),0)}.bind(this)},_invokeMethod:function(e,t,n){var r;if(e){var i=t&&t.pop(),s;typeof i=="function"?s=this._instrumentCallback(i):t&&t.push(i),r={methodCall:e,params:t,paramsCallbackIndex:s,resultCallbackIndex:n&&this._instrumentCallback(n)}}else r={returnCall:!0,params:t,resultCallbackIndex:n};r=JSON.stringify(r),this.contrAgent.win.postMessage(r,this.contrAgent.url)}},t.exports=r},{}]},{},[1]);